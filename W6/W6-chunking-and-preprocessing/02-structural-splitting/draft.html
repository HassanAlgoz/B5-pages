<!DOCTYPE html>
<html lang="en"><head>
<link href="../../../assets/icon.svg" rel="icon" type="image/svg+xml">
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.26">

  <meta name="author" content="malfadly@sdaia.gov.sa">
  <title>AI Pros Bootcamp – Structural Logic: Recursive &amp; Separator Splitting</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/theme/quarto-2476b6dbe24137c74cb80772f2f63bf0.css">
  <link rel="stylesheet" href="../../../assets/sdaia.scss">
  <link href="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="../../../site_libs/quarto-diagram/mermaid.min.js"></script>
  <script src="../../../site_libs/quarto-diagram/mermaid-init.js"></script>
  <link href="../../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">
  <link rel="icon" href="../../../assets/icon.svg">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="../../../assets/anim.svg" data-background-opacity="0.1" class="quarto-title-block center">
  <h1 class="title">Structural Logic: Recursive &amp; Separator Splitting</h1>

<div class="quarto-title-authors">
</div>

</section>
<section id="the-logic-of-recursion-a-waterfall-model" class="slide level2">
<h2>The Logic of Recursion: A Waterfall Model</h2>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>The Context Problem</strong></p>
<ul>
<li>LLMs have fixed <strong>Context Windows</strong>.</li>
<li>Data must be sliced into chunks.</li>
<li><strong>The Risk</strong>: “Semantic Integrity” loss.</li>
</ul>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>The Architect’s Solution</strong></p>
<ul>
<li>Move beyond “Fixed-Length” ribbons.</li>
<li>Adopt <strong>Recursive Structural Splitting</strong>.</li>
<li>Prioritize human-readable boundaries.</li>
</ul>
</div>
</div>
</div>
<aside class="notes">
<ul>
<li>Remind students that LLMs aren’t infinite; we have to feed them data in bite-sized pieces.</li>
<li>Explain that if we cut a sentence in half, the vector embedding (the “meaning”) becomes corrupted or “noisy.”</li>
<li>Introduce the shift from rigid math (every 500 chars) to logical structure.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-separator-hierarchy" class="slide level2">
<h2>The Separator Hierarchy</h2>
<p><strong>Documents are nested hierarchies, not flat strings.</strong></p>
<ul>
<li><strong>Level 1</strong>: <code>"\n\n"</code> (Paragraphs/Sections)</li>
<li><strong>Level 2</strong>: <code>"\n"</code> (Individual Lines)</li>
<li><strong>Level 3</strong>: <code>" "</code> (Words)</li>
<li><strong>Level 4</strong>: <code>""</code> (Characters - The Last Resort)</li>
</ul>
<p><strong>The Architect’s Rule:</strong> Always split at the <em>highest possible level</em> to keep context together. Only move down if the chunk is still too large.</p>
<aside class="notes">
<ul>
<li>Use the analogy of a human reading: we look for chapters, then paragraphs, then sentences.</li>
<li>Explain that keeping a paragraph together is better for RAG because the surrounding sentences provide context for the facts within.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-algorithm-try-then-refine" class="slide level2">
<h2>The Algorithm: “Try, Then Refine”</h2>
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">graph LR
    A[Raw Document] --&gt; B{Fits in \n \n?}
    B --&gt;|Yes| C[Keep Paragraph]
    B --&gt;|No| D{Fits in \n?}
    D --&gt;|Yes| E[Keep Line]
    D --&gt;|No| F{Fits in ' '?}
    F --&gt;|Yes| G[Keep Word]
    F --&gt;|No| H[Split Character]

    style C fill:#d4edda,stroke:#28a745
    style E fill:#d4edda,stroke:#28a745
    style G fill:#d4edda,stroke:#28a745
    style H fill:#f8d7da,stroke:#dc3545
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<div class="fragment">
<p><strong>Goal</strong>: Maximize chunk size without exceeding the limit.</p>
<aside class="notes">
<ul>
<li>Walk through the logic: The splitter is a decision tree.</li>
<li>It doesn’t just cut; it “negotiates” with the text.</li>
<li>Highlight that splitting by character is a “failure” state we try to avoid.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="visualizing-the-waterfall" class="slide level2">
<h2>Visualizing the “Waterfall”</h2>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>The Flow</strong></p>
<ul>
<li>Text “pours” through filters.</li>
<li>Only “overflow” moves down.</li>
<li>Adaptive to content density.</li>
</ul>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>Semantic Glue</strong></p>
<ul>
<li>Prevents mangled words.</li>
<li><em>Bad</em>: “The capital is Par | is.”</li>
<li><em>Good</em>: “The capital is Paris.”</li>
</ul>
</div>
</div>
</div>
<aside class="notes">
<ul>
<li>Explain the term “Waterfall”: the text flows down the hierarchy.</li>
<li>Mention “Semantic Glue”: the invisible context that binds words. If you break the glue, the RAG system fails to find the right answer.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="logic-in-action-integrity-vs.-density" class="slide level2">
<h2>Logic in Action: Integrity vs.&nbsp;Density</h2>

<img data-src="./assets/generated/plot_5380d5fb_recursive_waterfall_logic.png" class="r-stretch quarto-figure-center"><p class="caption">Image: Bar chart showing Semantic Integrity vs Content Density. Paragraph level splits have higher integrity than character level splits.</p><aside class="notes">
<ul>
<li>Explain the chart: High-quality documents (with paragraphs) allow the splitter to stay at Level 4 (Paragraphs).</li>
<li>Technical data like long URLs or DNA sequences force the splitter down to Level 1 (Characters), which is harder for LLMs to “understand.”</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-architects-takeaway" class="slide level2">
<h2>The Architect’s Takeaway</h2>
<ul>
<li><strong>Recursive splitting is adaptive.</strong></li>
<li>It avoids “one-size-fits-all” logic.</li>
<li>It respects natural language boundaries.</li>
<li><strong>Reliability First</strong>: It only degrades to aggressive splitting when the context window is threatened.</li>
</ul>
<aside class="notes">
<ul>
<li>Wrap up by emphasizing that as architects, we choose tools that adapt to the data.</li>
<li>Transition to the next section: How to actually code this using LangChain’s RecursiveCharacterTextSplitter.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="implementing-recursivecharactertextsplitter" class="slide level2">
<h2>Implementing RecursiveCharacterTextSplitter</h2>
<ul>
<li><strong>From Blueprint to Studio</strong>: Moving from theory to production-grade implementation.</li>
<li><strong>The Goal</strong>: Designing a data pipeline where chunks are digestible yet contextually rich.</li>
<li><strong>The Tool</strong>: LangChain’s <code>RecursiveCharacterTextSplitter</code>.</li>
</ul>
<aside class="notes">
<ul>
<li>Transition from the “Waterfall” concept to actual code.</li>
<li>Remind students that as architects, they are managing the “resolution” of their data.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-two-pillars-of-configuration" class="slide level2">
<h2>The Two Pillars of Configuration</h2>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>1. Chunk Size</strong></p>
<ul>
<li><strong>The Resolution</strong></li>
<li>Maximum characters/tokens per chunk.</li>
<li><strong>Too Small</strong>: Loss of “Big Picture.”</li>
<li><strong>Too Large</strong>: Risk of context window overflow.</li>
</ul>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>2. Chunk Overlap</strong></p>
<ul>
<li><strong>The Safety Margin</strong></li>
<li>Text shared between consecutive chunks.</li>
<li><strong>The Logic</strong>: Prevents cutting meaning in half.</li>
<li>Acts as a “Context Bridge.”</li>
</ul>
</div>
</div>
</div>
<aside class="notes">
<ul>
<li>Chunk size is the target, not a strict rule (the splitter tries to stay under it).</li>
<li>Overlap is vital for RAG so that the “seams” of the data don’t hide information.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-default-hierarchy" class="slide level2 smaller">
<h2>The Default Hierarchy</h2>
<p>The splitter uses a prioritized list of separators to maintain semantic unity.</p>
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">graph LR
    A[Raw Document] --&gt; B{"Split by '\n\n'?"}
    B -- Fits Chunk Size --&gt; C[Final Chunk: Paragraph]
    B -- Too Large --&gt; D{"Split by '\n'?"}
    D -- Fits Chunk Size --&gt; E[Final Chunk: Line]
    D -- Too Large --&gt; F{"Split by ' '?"}
    F -- Fits Chunk Size --&gt; G["Final Chunk: Words/Sentences"]
    F -- Too Large --&gt; H[Split by Character]
    
    style C fill:#d4edda,stroke:#28a745
    style E fill:#d4edda,stroke:#28a745
    style G fill:#d4edda,stroke:#28a745
    style H fill:#f8d7da,stroke:#dc3545
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<div class="fragment">
<ol type="1">
<li><strong>Double Newline</strong>: Keeps paragraphs intact.</li>
<li><strong>Single Newline</strong>: Keeps sentences/list items together.</li>
<li><strong>Space</strong>: Keeps words whole.</li>
<li><strong>Empty String</strong>: Last resort (character-level split).</li>
</ol>
<aside class="notes">
<ul>
<li>Explain that the splitter iterates through this list.</li>
<li>It only moves to the next separator if the current one results in a chunk larger than <code>chunk_size</code>.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="visualizing-the-sliding-window" class="slide level2">
<h2>Visualizing the Sliding Window</h2>
<p>The overlap ensures that meaning isn’t lost at the “seam.”</p>

<img data-src="./assets/generated/plot_8f4ce1a9_sliding_window.png" class="r-stretch quarto-figure-center"><p class="caption">Image: A diagram showing Chunk 1 from character 0-6 and Chunk 2 from character 4-10, with a highlighted overlap area from 4-6.</p><aside class="notes">
<ul>
<li>Analogous to a panoramic photo where frames must overlap to be stitched together.</li>
<li>This allows the LLM to see the “tail end” of the previous thought.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-architects-implementation" class="slide level2">
<h2>The Architect’s Implementation</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a></a><span class="im">from</span> langchain.text_splitter <span class="im">import</span> RecursiveCharacterTextSplitter</span>
<span id="cb1-2"><a></a></span>
<span id="cb1-3"><a></a><span class="co"># 1. Configuration</span></span>
<span id="cb1-4"><a></a>splitter <span class="op">=</span> RecursiveCharacterTextSplitter(</span>
<span id="cb1-5"><a></a>    chunk_size<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb1-6"><a></a>    chunk_overlap<span class="op">=</span><span class="dv">20</span>,</span>
<span id="cb1-7"><a></a>    separators<span class="op">=</span>[<span class="st">"</span><span class="ch">\n\n</span><span class="st">"</span>, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>, <span class="st">" "</span>, <span class="st">""</span>]</span>
<span id="cb1-8"><a></a>)</span>
<span id="cb1-9"><a></a></span>
<span id="cb1-10"><a></a><span class="co"># 2. Execution</span></span>
<span id="cb1-11"><a></a>chunks <span class="op">=</span> splitter.split_text(document)</span>
<span id="cb1-12"><a></a></span>
<span id="cb1-13"><a></a><span class="co"># 3. Inspection</span></span>
<span id="cb1-14"><a></a><span class="cf">for</span> i, chunk <span class="kw">in</span> <span class="bu">enumerate</span>(chunks):</span>
<span id="cb1-15"><a></a>    <span class="bu">print</span>(<span class="ss">f"Chunk </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">: </span><span class="sc">{</span><span class="bu">repr</span>(chunk)<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<aside class="notes">
<ul>
<li><code>repr()</code> is used to visualize the hidden newline characters.</li>
<li>Note how we define the separators explicitly to control the “waterfall.”</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="logic-analysis-why-it-works" class="slide level2">
<h2>Logic Analysis: Why It Works</h2>
<ul>
<li><strong>Paragraph Preservation</strong>: If “Section A” fits in 100 chars, it stays as one unit.</li>
<li><strong>The “Hard” Limit</strong>: If a paragraph is 150 chars, the splitter drops to <code>\n</code> to find a break point.</li>
<li><strong>The Context Bridge</strong>: The 20-character overlap ensures Chunk 2 starts with a “hint” of Chunk 1.</li>
</ul>
<div class="fragment">
<blockquote>
<p><strong>The Insurance Policy</strong>: Unlike simple splitters, this method prevents the “Mid-Word Disaster” (e.g., splitting “Architecture” into “Archi” and “tecture”).</p>
</blockquote>
<aside class="notes">
<ul>
<li>Emphasize that this is “Smart” splitting.</li>
<li>Mention the “Lost Context” problem: splitting a “NOT” away from the rest of the sentence.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="recursive-vs.-character-splitter" class="slide level2">
<h2>Recursive vs.&nbsp;Character Splitter</h2>
<table class="caption-top">
<colgroup>
<col style="width: 18%">
<col style="width: 40%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th>Feature</th>
<th>Character Splitter</th>
<th>Recursive Splitter</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Logic</strong></td>
<td>Rigid / Fixed</td>
<td>Hierarchical / Adaptive</td>
</tr>
<tr class="even">
<td><strong>Word Integrity</strong></td>
<td>High risk of mid-word cuts</td>
<td>Prioritizes word/sentence boundaries</td>
</tr>
<tr class="odd">
<td><strong>Context</strong></td>
<td>Often fragmented</td>
<td>Maintained via “Waterfall”</td>
</tr>
<tr class="even">
<td><strong>Use Case</strong></td>
<td>Simple, uniform logs</td>
<td>Complex, structured documents</td>
</tr>
</tbody>
</table>
<aside class="notes">
<ul>
<li>Use this to justify why <code>RecursiveCharacterTextSplitter</code> is the industry standard for RAG.</li>
<li>Prepare students for the next section on specialized separators (Code/Markdown).</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="context-aware-separators-code-markdown" class="slide level2">
<h2>Context-Aware Separators: Code &amp; Markdown</h2>
<ul>
<li><strong>The Problem</strong>: Blunt instruments (<code>\n</code>, <code>\n\n</code>) break logic.</li>
<li><strong>The Goal</strong>: <strong>Context Preservation</strong>.</li>
<li><strong>The Risk</strong>: A split function is a “hallucination factory.”</li>
<li><strong>The Architect’s Rule</strong>: Structure must dictate the split.</li>
</ul>
<aside class="notes">
<ul>
<li>Transition from general recursive splitting to specialized splitting.</li>
<li>Explain that “Context” is the most valuable asset in RAG.</li>
<li>If an LLM gets half a function, it can’t reason about the logic.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="why-generic-splitting-fails" class="slide level2">
<h2>Why Generic Splitting Fails</h2>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>The “Flat String” Trap</strong></p>
<ul>
<li>Treats Python like Prose.</li>
<li>Breaks classes mid-definition.</li>
<li>Separates headers from content.</li>
</ul>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>The Result</strong></p>
<ul>
<li><strong>Chunk A</strong>: <code>class DataProcessor:</code></li>
<li><strong>Chunk B</strong>: <code>def process(self): ...</code></li>
<li><strong>LLM Context</strong>: Chunk B loses its “Parent” identity.</li>
</ul>
</div>
</div>
</div>
<aside class="notes">
<ul>
<li>Emphasize the “Functional Hierarchy” of code.</li>
<li>Mention that retrieval is only as good as the coherence of the chunk.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="code-splitting-ast-aware-logic" class="slide level2">
<h2>Code Splitting: AST-Aware Logic</h2>
<ul>
<li><strong>AST (Abstract Syntax Tree)</strong>: The “skeleton” of your code.</li>
<li><strong>Hierarchy of Meaning</strong>:
<ol type="1">
<li><code>class</code> (Logical Container)</li>
<li><code>def</code> (Functional Unit)</li>
<li><code>if/elif/else</code> (Logic Branch)</li>
<li><code>for/while</code> (Iteration)</li>
</ol></li>
</ul>
<div class="fragment">
<ul>
<li><strong>The Strategy</strong>: Force the “Waterfall” to respect these keywords first.</li>
</ul>
<aside class="notes">
<ul>
<li>We don’t need a full compiler, but we need to emulate its logic.</li>
<li>Explain that we want to keep “Units of Thought” together.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="implementation-from_language" class="slide level2">
<h2>Implementation: <code>from_language</code></h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a></a><span class="im">from</span> langchain.text_splitter <span class="im">import</span> RecursiveCharacterTextSplitter, Language</span>
<span id="cb2-2"><a></a></span>
<span id="cb2-3"><a></a><span class="co"># Architect's Choice: Python-Specific Logic</span></span>
<span id="cb2-4"><a></a>python_splitter <span class="op">=</span> RecursiveCharacterTextSplitter.from_language(</span>
<span id="cb2-5"><a></a>    language<span class="op">=</span>Language.PYTHON, </span>
<span id="cb2-6"><a></a>    chunk_size<span class="op">=</span><span class="dv">500</span>, </span>
<span id="cb2-7"><a></a>    chunk_overlap<span class="op">=</span><span class="dv">50</span></span>
<span id="cb2-8"><a></a>)</span>
<span id="cb2-9"><a></a></span>
<span id="cb2-10"><a></a><span class="co"># Logic: Breaks at \nclass, then \ndef, then \n\tdef</span></span>
<span id="cb2-11"><a></a>chunks <span class="op">=</span> python_splitter.split_text(code_sample)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<aside class="notes">
<ul>
<li>Point out the <code>Language.PYTHON</code> enum.</li>
<li>Explain that LangChain pre-populates the separator list for us.</li>
<li>Note the indentation handling in the separators.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="markdown-headers-as-hard-boundaries" class="slide level2">
<h2>Markdown: Headers as Hard Boundaries</h2>
<ul>
<li>Markdown is the “Lingua Franca” of LLM Knowledge Bases.</li>
<li><strong>Header = Anchor</strong>: Without the <code>#</code>, the paragraph loses its “Topic.”</li>
</ul>
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">graph LR
    A[Markdown Doc] --&gt; B{Split at H1 #}
    B -- Too Big? --&gt; C{Split at H2 ##}
    C -- Too Big? --&gt; D{Split at H3 ###}
    D -- Too Big? --&gt; E[Recursive Text Splitting]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<aside class="notes">
<ul>
<li>Explain that headers provide the “semantic umbrella” for the text below them.</li>
<li>Mention that H1/H2/H3 are natural logical breakpoints.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="metadata-rich-splitting" class="slide level2">
<h2>Metadata-Rich Splitting</h2>
<ul>
<li><strong>The Strategy</strong>: Don’t just split; <strong>Tag</strong>.</li>
<li>Use <code>MarkdownHeaderTextSplitter</code>.</li>
<li><strong>Benefit</strong>: Every chunk “knows” its location in the document hierarchy.</li>
</ul>
<table class="caption-top">
<thead>
<tr class="header">
<th>Content</th>
<th>Metadata</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>“Run <code>pip install</code>…”</td>
<td><code>{"Header 1": "Installation"}</code></td>
</tr>
<tr class="even">
<td>“Set API_KEY in .env”</td>
<td><code>{"Header 1": "Configuration"}</code></td>
</tr>
</tbody>
</table>
<aside class="notes">
<ul>
<li>This is a pro-tip: Metadata injection is a superpower for RAG.</li>
<li>Even if the chunk is small, the LLM knows it belongs to “Installation.”</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="architectural-pattern-the-splitter-router" class="slide level2 smaller">
<h2>Architectural Pattern: The Splitter Router</h2>
<ul>
<li><strong>Anti-Pattern</strong>: One “Global Splitter” for all file types.</li>
<li><strong>The Pattern</strong>: Detect file extension <span class="math inline">\(\rightarrow\)</span> Route to specialized logic.</li>
</ul>
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">graph LR
    A[Raw Files] --&gt; B{Router}
    B --&gt;|.py| C[PythonSplitter]
    B --&gt;|.md| D[MarkdownSplitter]
    B --&gt;|.txt| E[RecursiveSplitter]

</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ol type="1">
<li><strong>For Code</strong>: Prioritize <code>class</code> and <code>def</code>. Never split a single line.</li>
<li><strong>For Markdown</strong>: Use headers as primary boundaries; inject into metadata.</li>
<li><strong>For Data (JSON)</strong>: Respect delimiters (brackets/keys) to avoid invalid syntax.</li>
</ol>
<aside class="notes">
<ul>
<li>In production, you deal with heterogeneous data.</li>
<li>The Router ensures the right “tool” is used for the right “material.”</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="section-4-edge-cases" class="slide level2">
<h2>Section 4: Edge Cases</h2>
<h3 id="the-unsplittable-chunk">The Unsplittable Chunk</h3>
<ul>
<li><strong>The “Happy Path” vs.&nbsp;Reality</strong>: Production data is rarely clean prose.</li>
<li><strong>Architect’s Responsibility</strong>: Build systems that don’t crash on “messy” data.</li>
<li><strong>The Goal</strong>: Prevent <strong>OOM (Out of Memory)</strong> errors and <strong>Semantic Noise</strong>.</li>
</ul>
<aside class="notes">
<ul>
<li>Remind students that while recursive splitting works for 90% of cases, the last 10% (edge cases) causes system crashes.</li>
<li>As architects, we focus on reliability and robustness.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-unsplittable-problem" class="slide level2">
<h2>The ‘Unsplittable’ Problem</h2>
<h3 id="when-delimiters-disappear">When Delimiters Disappear</h3>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>Common Culprits</strong></p>
<ul>
<li><strong>Deep Links</strong>: 5,000+ char tracking URLs.</li>
<li><strong>Base64 Blobs</strong>: Images embedded in JSON.</li>
<li><strong>DNA Sequences</strong>: Continuous <code>AGCT</code> strings.</li>
<li><strong>Log Files</strong>: Massive lines without whitespace.</li>
</ul>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>The Logic Failure</strong></p>
<ul>
<li>Splitter looks for <code>\n</code>, then <code>" "</code>, then <code>.</code>.</li>
<li>If none found: The chunk <strong>exceeds</strong> your limit.</li>
<li>Result: <strong>API Error</strong> or <strong>Dimension Mismatch</strong>.</li>
</ul>
</div>
</div>
</div>
<aside class="notes">
<ul>
<li>Explain that recursive splitters are “polite”—they try not to break words.</li>
<li>If a word is longer than the chunk size, the splitter might give up and return the whole thing, breaking the LLM context window.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-emergency-brake-strategy" class="slide level2">
<h2>The “Emergency Brake” Strategy</h2>
<h3 id="implementing-hard-character-splits">Implementing Hard Character Splits</h3>
<ul>
<li><strong>The Fallback</strong>: Use the empty string <code>""</code> as the final separator.</li>
<li><strong>The Guarantee</strong>: If no semantic break exists, cut exactly at the character limit.</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a></a><span class="im">from</span> langchain.text_splitter <span class="im">import</span> RecursiveCharacterTextSplitter</span>
<span id="cb3-2"><a></a></span>
<span id="cb3-3"><a></a>splitter <span class="op">=</span> RecursiveCharacterTextSplitter(</span>
<span id="cb3-4"><a></a>    chunk_size<span class="op">=</span><span class="dv">1000</span>,</span>
<span id="cb3-5"><a></a>    chunk_overlap<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb3-6"><a></a>    <span class="co"># The "" is the 'Emergency Brake'</span></span>
<span id="cb3-7"><a></a>    separators<span class="op">=</span>[<span class="st">"</span><span class="ch">\n\n</span><span class="st">"</span>, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>, <span class="st">" "</span>, <span class="st">""</span>] </span>
<span id="cb3-8"><a></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<aside class="notes">
<ul>
<li>Emphasize that the order of the list matters.</li>
<li>The empty string should always be last; it’s the “last resort” to ensure system stability.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="small-chunk-noise" class="slide level2 smaller">
<h2>Small Chunk Noise</h2>
<h3 id="the-tail-of-the-recursion">The “Tail” of the Recursion</h3>
<ul>
<li><strong>The Scenario</strong>: A 1,050-char doc split into 500-char chunks leaves a <strong>50-char “tail”</strong>.</li>
<li><strong>The Problem</strong>: “Contact us at support@example.com” has no context.</li>
<li><strong>The Impact</strong>: These “noisy” chunks waste space in the context window.</li>
</ul>
<h3 id="the-architects-fix-post-processing">The Architect’s Fix: Post-Processing</h3>
<ol type="1">
<li><strong>Discard</strong>: Remove chunks below a threshold (e.g., &lt; 100 chars).</li>
<li><strong>Merge</strong>: Append the tiny “tail” to the previous chunk.</li>
</ol>
<aside class="notes">
<ul>
<li>Discuss the trade-off: Is a tiny chunk better than no chunk?</li>
<li>Usually, a tiny chunk is just noise that confuses the retrieval step.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="visualizing-failure-modes" class="slide level2">
<h2>Visualizing Failure Modes</h2>
<h3 id="the-messy-data-profile">The “Messy Data” Profile</h3>

<img data-src="./assets/generated/plot_fbd6565e_chunk_distribution.png" class="r-stretch quarto-figure-center"><p class="caption">Image: A histogram showing chunk size distribution. Most chunks are at the target size, but there are spikes at the very low end (noise) and the very high end (unsplittable blobs exceeding the red hard-limit line).</p><aside class="notes">
<ul>
<li>Explain the histogram: the red line is the LLM’s hard limit.</li>
<li>Anything to the right of the red line causes a system crash.</li>
<li>Anything at the far left is “context-less” noise.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-architects-stress-test" class="slide level2 smaller">
<h2>The Architect’s Stress Test</h2>
<h3 id="evaluation-heuristic">Evaluation Heuristic</h3>
<table class="caption-top">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Metric</th>
<th style="text-align: left;">Question</th>
<th style="text-align: left;">Danger Zone</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Overflow Rate</strong></td>
<td style="text-align: left;">Any chunks &gt; <code>chunk_size</code>?</td>
<td style="text-align: left;"><strong>OOM Risk</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>The 10% Tail</strong></td>
<td style="text-align: left;">&gt;10% of chunks &lt; 100 chars?</td>
<td style="text-align: left;"><strong>High Noise</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Header Isolation</strong></td>
<td style="text-align: left;">Chunk ends with a Title only?</td>
<td style="text-align: left;"><strong>Broken Context</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Mid-Code Split</strong></td>
<td style="text-align: left;">Logic cut in the middle?</td>
<td style="text-align: left;"><strong>Logic Failure</strong></td>
</tr>
</tbody>
</table>
<aside class="notes">
<ul>
<li>Use this as a checklist for students to use during their final projects.</li>
<li>“Header isolation” is a common reason why RAG systems fail to answer simple questions.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="logic-flow-robust-splitting" class="slide level2">
<h2>Logic Flow: Robust Splitting</h2>
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">graph LR
    A[Input Text] --&gt; B{Has Separators?}
    B -- Yes --&gt; C[Recursive Logic]
    B -- No --&gt; D{Length &gt; Limit?}
    D -- Yes --&gt; E[Hard Char Split]
    D -- No --&gt; F[Single Chunk]
    C --&gt; G{Too Small?}
    E --&gt; G
    G -- Yes --&gt; H[Merge or Discard]
    G -- No --&gt; I[Vector DB]
    H --&gt; I
    F --&gt; I
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<aside class="notes">
<ul>
<li>This diagram summarizes the entire section.</li>
<li>It shows how we handle both the “too big” (Hard Split) and “too small” (Merge/Discard) problems.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="summary-the-architects-word" class="slide level2">
<h2>Summary: The Architect’s Word</h2>
<ul>
<li><strong>Never trust your data</strong>: Production data is hostile.</li>
<li><strong>System Reliability &gt; Semantic Integrity</strong>: Better to cut a URL in half than to crash the server.</li>
<li><strong>Filter the Noise</strong>: Post-process your chunks to ensure quality retrieval.</li>
</ul>
<aside class="notes">
<ul>
<li>Final takeaway: A GenAI Architect builds for the worst-case scenario.</li>
<li>Transition to the next module on Embedding Models.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>


</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="../../../assets/icon.svg" class="slide-logo"></p>
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"},{"title":"Index","icon":"<svg width='1.8rem' viewBox='0 0 24 24'><path d='M5 7h14M5 12h14M5 17h7' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/></svg>","src":"../index.html"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: true,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>